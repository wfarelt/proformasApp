{% extends 'core/list.html' %}

{% block title %}
Kits de Productos
{% endblock %}

{% block create %}
<a href="{% url 'kit_create' %}" class="btn btn-primary">
    <i class="fas fa-plus"></i> Nuevo Kit
</a>
{% endblock create %}

{% block columns %}
<th>ID</th>
<th>Nombre</th>
<th>Descripción</th>
<th>Productos</th>
<th>Creado</th>
<th>Estado</th>
<th>Acciones</th>
{% endblock columns %}

{% block rows %}
<td>{{ obj.id }}</td>
<td><strong>{{ obj.name }}</strong></td>
<td>{{ obj.description|truncatewords:10 }}</td>
<td>
    <span class="badge badge-info">{{ obj.get_items_count }}</span>
</td>
<td>{{ obj.created_at|date:"d/m/Y H:i" }}</td>
<td>
    {% if obj.is_active %}
        <span class="badge badge-success">Activo</span>
    {% else %}
        <span class="badge badge-danger">Inactivo</span>
    {% endif %}
</td>
{% endblock rows %}

{% block actions %}
<div class="btn-group" role="group">
    <a href="{% url 'kit_detail' obj.id %}" class="btn btn-info btn-sm" title="Ver detalles">
        <i class="fas fa-eye"></i>
    </a>
    <a href="{% url 'kit_edit' obj.id %}" class="btn btn-warning btn-sm" title="Editar">
        <i class="fas fa-edit"></i>
    </a>
    <a href="{% url 'kit_add_item' obj.id %}" class="btn btn-success btn-sm" title="Agregar producto">
        <i class="fas fa-plus"></i>
    </a>
    <!-- Toggle estado via POST -->
    <form method="post" action="{% url 'kit_delete' obj.id %}" style="display:inline;">
        {% csrf_token %}
        {% if obj.is_active %}
            <button type="submit" class="btn btn-danger btn-sm" 
                    title="Desactivar kit" onclick="return confirm('¿Estás seguro de desactivar este kit?');">
                <i class="fas fa-trash-alt"></i>
            </button>
        {% else %}
            <button type="submit" class="btn btn-default btn-sm" 
                    title="Activar kit" onclick="return confirm('¿Estás seguro de activar este kit?');">
                <i class="fas fa-check"></i>
            </button>
        {% endif %}
    </form>

</div>
{% endblock actions %}